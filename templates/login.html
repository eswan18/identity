<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-10 w-full max-w-md">
        <div class="text-center mb-8">
            <h1 class="text-2xl font-semibold text-gray-900 dark:text-gray-50 mb-2">Sign In</h1>
            <p class="text-sm text-gray-500 dark:text-gray-400">Enter your credentials to continue</p>
        </div>

        {{if .Error}}
        {{if or (eq .Error "Account created successfully! Please check your email to verify your account.") (eq .Error "Email verified successfully! Please sign in.") (eq .Error "Password reset successfully! Please sign in with your new password.")}}
        <div class="p-4 rounded-lg text-sm flex items-start gap-2.5 mb-6 bg-green-50 text-green-800 border border-green-200 dark:bg-green-900/20 dark:text-green-300 dark:border-green-800/30">
            <svg class="flex-shrink-0 mt-px" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.78 5.28-4.5 6a.75.75 0 0 1-1.18.02l-2.25-2.5a.75.75 0 1 1 1.12-1l1.63 1.81 3.92-5.23a.75.75 0 1 1 1.26.9z"/>
            </svg>
            <span>{{.Error}}</span>
        </div>
        {{else}}
        <div class="p-4 rounded-lg text-sm flex items-start gap-2.5 mb-6 bg-red-50 text-red-800 border border-red-200 dark:bg-red-900/20 dark:text-red-300 dark:border-red-800/30">
            <svg class="flex-shrink-0 mt-px" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm-.75 4.75a.75.75 0 0 1 1.5 0v3.5a.75.75 0 0 1-1.5 0v-3.5zM8 12a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
            </svg>
            <span>{{.Error}}</span>
        </div>
        {{end}}
        {{end}}

        <form method="POST" action="/oauth/login">
            <div class="mb-5">
                <label for="username" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Username</label>
                <input
                    type="text"
                    id="username"
                    name="username"
                    placeholder="Enter your username"
                    required
                    autofocus
                    autocomplete="username"
                    class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20"
                >
            </div>

            <div class="mb-5">
                <label for="password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Password</label>
                <input
                    type="password"
                    id="password"
                    name="password"
                    placeholder="Enter your password"
                    required
                    autocomplete="current-password"
                    class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20"
                >
            </div>

            <input type="hidden" name="client_id" value="{{.ClientID}}">
            <input type="hidden" name="redirect_uri" value="{{.RedirectURI}}">
            <input type="hidden" name="state" value="{{.State}}">
            {{range .Scope}}
            <input type="hidden" name="scope" value="{{.}}">
            {{end}}
            <input type="hidden" name="code_challenge" value="{{.CodeChallenge}}">
            <input type="hidden" name="code_challenge_method" value="{{.CodeChallengeMethod}}">

            <button type="submit" class="w-full px-6 py-3 text-base font-medium rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600 cursor-pointer">Sign In</button>
        </form>

        <div class="text-center mt-4 text-sm space-x-4">
            <a href="/oauth/forgot-password" class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium">Forgot password?</a>
            <a href="/oauth/forgot-username" class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium">Forgot username?</a>
        </div>

        <div class="text-center mt-6 text-sm text-gray-500 dark:text-gray-400">
            Don't have an account? <a href="/oauth/register?client_id={{.ClientID}}&redirect_uri={{.RedirectURI}}&state={{.State}}{{range .Scope}}&scope={{.}}{{end}}&code_challenge={{.CodeChallenge}}&code_challenge_method={{.CodeChallengeMethod}}" class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium">Sign up</a>
        </div>

        <div class="text-center mt-6 pt-6 border-t border-gray-200 dark:border-gray-700 text-xs text-gray-400 dark:text-gray-500">
            Identity Service
        </div>
    </div>
</body>
</html>
