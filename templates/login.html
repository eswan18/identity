<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="card p-10 w-full max-w-md">
        <div class="text-center mb-8">
            <h1 class="text-2xl font-semibold mb-2">Sign In</h1>
            <p class="text-sm opacity-60">Enter your credentials to continue</p>
        </div>

        {{if .Error}}
        {{if or (eq .Error "Account created successfully! Please check your email to verify your account.") (eq .Error "Email verified successfully! Please sign in.") (eq .Error "Password reset successfully! Please sign in with your new password.")}}
        <div class="alert alert-success mb-6">
            <svg class="shrink-0" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.78 5.28-4.5 6a.75.75 0 0 1-1.18.02l-2.25-2.5a.75.75 0 1 1 1.12-1l1.63 1.81 3.92-5.23a.75.75 0 1 1 1.26.9z"/>
            </svg>
            <span>{{.Error}}</span>
        </div>
        {{else}}
        <div class="alert alert-error mb-6">
            <svg class="shrink-0" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm-.75 4.75a.75.75 0 0 1 1.5 0v3.5a.75.75 0 0 1-1.5 0v-3.5zM8 12a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
            </svg>
            <span>{{.Error}}</span>
        </div>
        {{end}}
        {{end}}

        <form method="POST" action="/oauth/login">
            <div class="mb-5">
                <label for="username" class="label">Username</label>
                <input
                    type="text"
                    id="username"
                    name="username"
                    placeholder="Enter your username"
                    required
                    autofocus
                    autocomplete="username"
                    class="input w-full"
                >
            </div>

            <div class="mb-5">
                <label for="password" class="label">Password</label>
                <input
                    type="password"
                    id="password"
                    name="password"
                    placeholder="Enter your password"
                    required
                    autocomplete="current-password"
                    class="input w-full"
                >
            </div>

            <input type="hidden" name="client_id" value="{{.ClientID}}">
            <input type="hidden" name="redirect_uri" value="{{.RedirectURI}}">
            <input type="hidden" name="state" value="{{.State}}">
            {{range .Scope}}
            <input type="hidden" name="scope" value="{{.}}">
            {{end}}
            <input type="hidden" name="code_challenge" value="{{.CodeChallenge}}">
            <input type="hidden" name="code_challenge_method" value="{{.CodeChallengeMethod}}">

            <button type="submit" class="btn btn-primary w-full">Sign In</button>
        </form>

        <div class="text-center mt-4 text-sm space-x-4">
            <a href="/oauth/forgot-password" class="link link-primary">Forgot password?</a>
            <a href="/oauth/forgot-username" class="link link-primary">Forgot username?</a>
        </div>

        <div class="text-center mt-6 text-sm opacity-60">
            Don't have an account? <a href="/oauth/register?client_id={{.ClientID}}&redirect_uri={{.RedirectURI}}&state={{.State}}{{range .Scope}}&scope={{.}}{{end}}&code_challenge={{.CodeChallenge}}&code_challenge_method={{.CodeChallengeMethod}}" class="link link-primary">Sign up</a>
        </div>

        <div class="text-center mt-6 pt-6 border-t border-base-300 text-xs opacity-50">
            Identity Service
        </div>
    </div>
</body>
</html>
